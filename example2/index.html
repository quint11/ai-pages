<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>示例网页应用2 - 数据可视化</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }
    h1 {
      color: #2c3e50;
    }
    .chart-container {
      width: 100%;
      margin: 20px 0;
    }
    .file-upload {
      margin: 20px 0;
      padding: 15px;
      border: 2px dashed #ccc;
      border-radius: 8px;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>数据可视化示例</h1>
  <p>这是一个演示数据可视化的示例网页应用。</p>
  
  <div class="file-upload">
    <input type="file" id="csv-file" accept=".csv">
    <p>或 <button id="use-sample">使用示例数据</button></p>
  </div>
  
  <div class="chart-container">
    <canvas id="myChart"></canvas>
  </div>
  
  <p><a href="README.md">查看详细文档</a></p>
  
  <script>
    // 示例数据
    const sampleData = {
      labels: ['一月', '二月', '三月', '四月', '五月'],
      datasets: [{
        label: '示例数据',
        data: [12, 19, 3, 5, 2],
        backgroundColor: 'rgba(54, 162, 235, 0.2)',
        borderColor: 'rgba(54, 162, 235, 1)',
        borderWidth: 1
      }]
    };
    
    // 初始化图表
    const ctx = document.getElementById('myChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'bar',
      data: sampleData,
      options: {
        responsive: true,
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
    
    // 使用示例数据按钮
    document.getElementById('use-sample').addEventListener('click', function() {
      chart.data = sampleData;
      chart.update();
    });
    
    // CSV文件处理
    document.getElementById('csv-file').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (!file) return;
      
      const reader = new FileReader();
      reader.onload = function(e) {
        // 简单解析CSV数据
        const csvData = e.target.result;
        const lines = csvData.split('\n');
        const headers = lines[0].split(',');
        const data = [];
        
        for (let i = 1; i < lines.length; i++) {
          if (lines[i].trim()) {
            data.push(parseFloat(lines[i].split(',')[1]));
          }
        }
        
        // 更新图表
        chart.data = {
          labels: headers,
          datasets: [{
            label: '上传数据',
            data: data,
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgba(255, 99, 132, 1)',
            borderWidth: 1
          }]
        };
        chart.update();
      };
      reader.readAsText(file);
    });
  </script>
</body>
</html>